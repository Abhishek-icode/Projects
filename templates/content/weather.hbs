<!DOCTYPE html>
<html lang="en">

<head>
    {{>headerlinks}}
    <title>AK weather</title>
</head>

<body>
    <!-- navigation bar -->
    {{>navbar}}
    <!-- header -->
    <div class="container-fluid main_header">
        <div class="row">
            <div class="col-md-10 col-12 mx-auto">
                <div class="main_content">
                    <form class="temp">
                        <input type="text" id="cityname" placeholder="Enter Your City Name" autocomplete="off">
                        <input type="submit" value="search" id="submitbtn">
                    </form>
                    <div class="tempinfo">
                        <div class="toplayer">
                            <p id="day">Tuesdey</p>
                            <p id="today"></p>
                            <p id="todaydate">Oct</p>
                        </div>
                        <div class="mainlayer">
                            <p id="cname">Get output here</p>
                            <div class="middle hide">
                                <p id="temp2"> <span id="real">0</span> <sup>o</sup> C</p>
                                <p id="tempstatus"><i class="fa fa-cloud" aria-hidden="true"></i></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- footer -->
    {{>footer}}
    <script>
        const cityname = document.getElementById("cityname")
        const submitbtn = document.getElementById('submitbtn')
        const cname = document.getElementById('cname')
        const real = document.getElementById('real')
        const tempstatus = document.getElementById('tempstatus')
        const datehide = document.querySelector('.middle')

        const getinfo = async (event) => {
            event.preventDefault();
            let cityval = cityname.value;
            if (cityval === "") {
                cname.innerHTML = `Please enter your Location befor search`;
                datehide.classList.add("hide")
            } else {
                try {
                    let url = `https://api.openweathermap.org/data/2.5/weather?q=${cityval}&appid=3b5b770eb1c757c9294345a09164e446`
                    const response = await fetch(url)
                    const data = await response.json();
                    const arrdata = [data];
                    const t = (arrdata[0].main.temp) / 10;
                    const n = t.toFixed(1);
                    cname.innerText = `${arrdata[0].name}, ${arrdata[0].sys.country}`
                    real.innerText = n;
                    tempstatus.innerText = arrdata[0].weather[0].main;
                    tempmood = arrdata[0].weather[0].main;
                    if (tempmood == "Sunny") {
                        tempstatus.innerHTML = "<i class='fas fa-sun' style='color: rgb(255, 196, 0);'></i>"
                    } else if (tempmood == "Clouds") {
                        tempstatus.innerHTML = "<i class='fas fa-cloud' style='color: #2fb9f5;'></i>"
                    } else if (tempmood == "Rainy") {
                        tempstatus.innerHTML = "<i class='fas fa-cloud-rain' style='color: rgb(255, 196, 0);'></i>"
                    } else {
                        tempstatus.innerHTML = "<i class='fas fa-sun' style='color: rgb(255, 196, 0);'></i>"
                    }
                    datehide.classList.remove("hide")

                } catch {
                    cname.innerHTML = `Please enter your Location Properly`;
                    datehide.classList.add("hide")
                }
            }
        }
        submitbtn.addEventListener("click", getinfo)

        const getcurrentday = () => {
            var d = new Date();
            var weekday = new Array(7);
            weekday[0] = "Sunday";
            weekday[1] = "Monday";
            weekday[2] = "Tuesday";
            weekday[3] = "Wednesday";
            weekday[4] = "Thursday";
            weekday[5] = "Friday";
            weekday[6] = "Saturday";

            let currentime = new Date();
            const day = document.getElementById('day')
            let days = weekday[currentime.getDay()] +",";

            day.innerText = days;
        }
        getcurrentday()

        var d = new Date();
        var month = new Array();
        month[0] = "January";
        month[1] = "February";
        month[2] = "March";
        month[3] = "April";
        month[4] = "May";
        month[5] = "June";
        month[6] = "July";
        month[7] = "August";
        month[8] = "September";
        month[9] = "October";
        month[10] = "November";
        month[11] = "December";
        var n = month[d.getMonth()];
        document.getElementById("todaydate").innerHTML = n;
        document.getElementById("today").innerHTML = d.getDate();

    </script>
</body>

</html>